(()=>{var e={23:(e,t,n)=>{"use strict";n.d(t,{U:()=>r,Z:()=>i});let o={portApi:3e3},r=function(){return"http://"+window.location.host.split(":")[0]+":"+o.portApi};const i=o},13:(e,t,n)=>{"use strict";var o=n(23);const r=document.querySelector.bind(document),i=(document.querySelectorAll.bind(document),r(".content")),s=r(".box.post"),a=r(".image_avt.user"),c=r(".login_feature");({currentID:-1,currentUser:null,createElementPost:function({user:e,post:t}){return`<div class="box">\n        <div class="column">\n          <div class="image-text-wrapper">\n            <img src="${e.image}">\n            <div class="text-wrapper">\n              <h3>${e.name}</h3>\n            </div>\n          </div>\n          <div class="column">\n            <h4>${t.content}</h4>\n            <img class="post" src="${t.image}">\n          </div>\n          <div class="column">\n            <div class="button-wrapper">\n              <div class="button">Comment</div>\n              <div class="button like">Like</div>\n              <div class="button">Share</div>\n            </div>\n          </div>\n        </div>\n      </div>`},createPost:function(){let e=r(".thinking-status-body textarea").value,t=r(".thinking-status-body input[name='image']").value,n=this.currentID;if(""==t||""==e)return;let o={image:t,content:e,author_id:n};var i=this.getUrlFetch()+"/posts";fetch(i,this.getOptionFetch({method:"POST",body:JSON.stringify(o)})).then((e=>{s.querySelector("textarea").value="",s.querySelector("input[name='image']").value="",e.json()}))},getUrlFetch:function(){return"http://"+window.location.host.split(":")[0]+":"+o.Z.portApi},getOptionFetch:function({method:e,body:t}){return"GET"==e?{method:e,headers:{"Content-Type":"application/json"}}:{method:e,headers:{"Content-Type":"application/json"},body:t}},loadCurrentUser:async function(){var e=localStorage.getItem("user_id");if(null!=e&&""!=e){var t=this.getUrlFetch()+"/profile/"+e;await fetch(t,this.getOptionFetch({method:"GET"})).then((e=>e.json())).then((e=>{this.currentID=e.id,this.currentUser=Object.assign({},e),this.setUserToDOM(e)})).then((()=>{this.mapEvent()})),c.querySelector("a").innerText="Logout",c.querySelector("a").onclick=e=>{e.preventDefault(),localStorage.setItem("user_id",""),window.location.href="http://"+window.location.host+"/forum.html"}}else{let e={image:"/images/user.jpg",name:"Guest",disabled:!0};this.setUserToDOM(e)}},loadPosts:function(){var e=this.getUrlFetch()+"/posts?_sort=id&_order=desc";fetch(e,this.getOptionFetch({method:"GET"})).then((e=>e.json())).then((e=>{e.forEach((async e=>{let t;var n=this.getUrlFetch()+"/profile/"+e.author_id;await fetch(n,this.getOptionFetch({method:"GET"})).then((e=>e.json())).then((e=>t=Object.assign({},e))),i.innerHTML+=this.createElementPost({user:t,post:e})}))}))},setUserToDOM:function(e){if(a.querySelector("img").src=e.image,a.querySelector("h4").innerText=e.name,s.querySelector("img").src=e.image,e?.disabled){let e=s.querySelector("textarea");e.disabled=!0,e.classList.toggle("disabled",!0);let t=s.querySelector(".postBtn");t.disabled=!0,t.classList.toggle("disabled",!0)}},mapEvent:function(){var e=this;setTimeout((()=>{r(".thinking-status-footer .postBtn").onclick=t=>{e.createPost(t)}}),1500)},run:function(){this.loadCurrentUser(),this.loadPosts()}}).run()},125:()=>{const e=document.querySelector(".navbar-toggler"),t=document.querySelector("#navbarSupportedContent");e.addEventListener("click",(()=>{t.classList.toggle("show")}));var n=document.querySelector("#carouselExampleIndicators");new bootstrap.Carousel(n,{interval:3e3})},537:(e,t,n)=>{"use strict";var o=n(23);const r=document.querySelector.bind(document),i=r(".mainForm.login"),s=r(".usr_email"),a=r(".usr_password"),c=r("center.notify");i.onsubmit=async function(e){e.preventDefault();let t=s.value,n=a.value,r=!1;var i="http://"+window.location.host.split(":")[0]+":"+o.Z.portApi+"/profile";await fetch(i,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>e.json())).then((e=>{console.log(e),e.forEach((e=>{e.email==t.trim()&&e.password==n.trim()&&(localStorage.setItem("user_id",e.id),c.innerText="Login success ! Redirect after 2s",c.style.color="green",r=!0,setTimeout((()=>{window.location.href="http://"+window.location.host+"/index.html"}),2e3))}))})),1!=r&&(c.innerText="Login failed !",c.style.color="red")}},68:(e,t,n)=>{"use strict";var o=n(23);const r=document.querySelector.bind(document),i=r("form"),s=r("center.noti");i.onsubmit=async e=>{e.preventDefault();let t=i.querySelector("input[name='email']").value,n=i.querySelector("input[name='password']").value,r=i.querySelector("input[name='repassword']").value,a=i.querySelector("input[name='name']").value,c=i.querySelector("input[name='image']").value;if(n!=r)return s.style.color="red",s.innerText="Password repeat is wrong !",!1;var l=(0,o.U)()+"/profile?email="+t;await fetch(l,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>e.json())).then((e=>{if(0!=e.length)return s.style.color="red",s.innerText="User is exist !",!1}));var u={name:a,email:t,password:n,image:c},d=(0,o.U)()+"/profile";await fetch(d,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(u)}).then((e=>{if(201==e.status)return s.style.color="green",s.innerText="Register success !",!1}))}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(125),n(23),n(13),n(537),n(68)})();